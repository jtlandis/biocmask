<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get observations of a vector — vctrs_slice • biocmask</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get observations of a vector — vctrs_slice"><meta name="description" content='This extends vctrs::vec_slice to S4Vectors::Vector class by masking
vec_slice with S7::new_generic. Atomic vectors and other base S3 classes
(list, data.frame, factor, Dat, POSIXct) will dispatch to the
vctrs::vec_slice method as normal. Dispatch support on the
S4Vectors::Vector and S4Vectors::DataFrame classes provides a unified
framework for working with base R vectors and S4Vectors.
S4Vectors::Vector Implementation


This method will naively call the [ method for any S4 class that inherits
from the S4Vectors::Vector class. This may not be a very efficient way to
slice up an S4 class, but will work.
With this implementation, the x@mcol data is expected to be retained after
a call to biocmask::vec_slice(x, i).



S4Vectors::DataFrame Implementation


The DataFrame implementation works similar to how vctrs::vec_slice works
on a data.frame object. What is being sliced is the rows of x@listData.
To maintain the size stability of the DataFrame object, we change @nrows
to the appropriate value, and perform a recursive call if @elementMetadata
is not NULL.



Performance


Depending on the size and complexity of your S4 Vector object, you may find
the standard subset operation is extremely slow. For example, consider a
SummarizedExperiment whose rowData contains a CompressedGRangesList
object assigned to the name "exons" and whose length is 250,000 and
underlying @unlistData is length 1,600,000. Performing a by .features
grouping operation and attempting to evaluate the exons within the row
context would force the CompressedGRangesList object to be
chopped element-wise.
Unfortunately, there is a massive performance hit in attempting to construct
250,000 GRanges. Unless you do not mind waiting over an hour for each
dplyr verb in which exons gets evaluated, consider biocmask_s4_proxy_vec().
This attempts to reconstruct certain standard S4Vectors::Vectors as
standard vectors or tibbles. The equivalent exons object would require
much more memory use, but at the advantage of only taking several seconds to
construct.When you are done, you can attempt to restore the original S4
Vector with biocmask_restore_s4_proxy().
biocmask_s4_proxy_vec() is faster to work with because there are less
checks on the object validity and all @elementMetadata and @metadata are
dropped from the objects.

'><meta property="og:description" content='This extends vctrs::vec_slice to S4Vectors::Vector class by masking
vec_slice with S7::new_generic. Atomic vectors and other base S3 classes
(list, data.frame, factor, Dat, POSIXct) will dispatch to the
vctrs::vec_slice method as normal. Dispatch support on the
S4Vectors::Vector and S4Vectors::DataFrame classes provides a unified
framework for working with base R vectors and S4Vectors.
S4Vectors::Vector Implementation


This method will naively call the [ method for any S4 class that inherits
from the S4Vectors::Vector class. This may not be a very efficient way to
slice up an S4 class, but will work.
With this implementation, the x@mcol data is expected to be retained after
a call to biocmask::vec_slice(x, i).



S4Vectors::DataFrame Implementation


The DataFrame implementation works similar to how vctrs::vec_slice works
on a data.frame object. What is being sliced is the rows of x@listData.
To maintain the size stability of the DataFrame object, we change @nrows
to the appropriate value, and perform a recursive call if @elementMetadata
is not NULL.



Performance


Depending on the size and complexity of your S4 Vector object, you may find
the standard subset operation is extremely slow. For example, consider a
SummarizedExperiment whose rowData contains a CompressedGRangesList
object assigned to the name "exons" and whose length is 250,000 and
underlying @unlistData is length 1,600,000. Performing a by .features
grouping operation and attempting to evaluate the exons within the row
context would force the CompressedGRangesList object to be
chopped element-wise.
Unfortunately, there is a massive performance hit in attempting to construct
250,000 GRanges. Unless you do not mind waiting over an hour for each
dplyr verb in which exons gets evaluated, consider biocmask_s4_proxy_vec().
This attempts to reconstruct certain standard S4Vectors::Vectors as
standard vectors or tibbles. The equivalent exons object would require
much more memory use, but at the advantage of only taking several seconds to
construct.When you are done, you can attempt to restore the original S4
Vector with biocmask_restore_s4_proxy().
biocmask_s4_proxy_vec() is faster to work with because there are less
checks on the object validity and all @elementMetadata and @metadata are
dropped from the objects.

'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">biocmask</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.18</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/biocmask.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jtlandis/biocmask/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get observations of a vector</h1>
      <small class="dont-index">Source: <a href="https://github.com/jtlandis/biocmask/blob/main/R/vctrs-S4-slice.R" class="external-link"><code>R/vctrs-S4-slice.R</code></a></small>
      <div class="d-none name"><code>vctrs_slice.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This extends <code><a href="https://vctrs.r-lib.org/reference/vec_slice.html" class="external-link">vctrs::vec_slice</a></code> to <code><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">S4Vectors::Vector</a></code> class by masking
<code>vec_slice</code> with <code><a href="https://rconsortium.github.io/S7/reference/new_generic.html" class="external-link">S7::new_generic</a></code>. Atomic vectors and other base S3 classes
(list, data.frame, factor, Dat, POSIXct) will dispatch to the
<code><a href="https://vctrs.r-lib.org/reference/vec_slice.html" class="external-link">vctrs::vec_slice</a></code> method as normal. Dispatch support on the
<code><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">S4Vectors::Vector</a></code> and <code><a href="https://rdrr.io/pkg/S4Vectors/man/DataFrame-class.html" class="external-link">S4Vectors::DataFrame</a></code> classes provides a unified
framework for working with base R vectors and <code>S4Vectors</code>.</p><div class="section">
<h3 id="s-vectors-vector-implementation"><code><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">S4Vectors::Vector</a></code> Implementation<a class="anchor" aria-label="anchor" href="#s-vectors-vector-implementation"></a></h3>


<p>This method will naively call the <code>[</code> method for any S4 class that inherits
from the <code><a href="https://rdrr.io/pkg/S4Vectors/man/Vector-class.html" class="external-link">S4Vectors::Vector</a></code> class. This may not be a very efficient way to
slice up an S4 class, but will work.</p>
<p>With this implementation, the <code>x@mcol</code> data is expected to be retained after
a call to <code>biocmask::vec_slice(x, i)</code>.</p>
</div>

<div class="section">
<h3 id="s-vectors-dataframe-implementation"><code><a href="https://rdrr.io/pkg/S4Vectors/man/DataFrame-class.html" class="external-link">S4Vectors::DataFrame</a></code> Implementation<a class="anchor" aria-label="anchor" href="#s-vectors-dataframe-implementation"></a></h3>


<p>The <code>DataFrame</code> implementation works similar to how <code><a href="https://vctrs.r-lib.org/reference/vec_slice.html" class="external-link">vctrs::vec_slice</a></code> works
on a <code>data.frame</code> object. What is being sliced is the rows of <code>x@listData</code>.
To maintain the size stability of the <code>DataFrame</code> object, we change <code>@nrows</code>
to the appropriate value, and perform a recursive call if <code>@elementMetadata</code>
is not <code>NULL</code>.</p>
</div>

<div class="section">
<h3 id="performance">Performance<a class="anchor" aria-label="anchor" href="#performance"></a></h3>


<p>Depending on the size and complexity of your S4 Vector object, you may find
the standard subset operation is extremely slow. For example, consider a
<code>SummarizedExperiment</code> whose rowData contains a <code>CompressedGRangesList</code>
object assigned to the name "exons" and whose length is 250,000 and
underlying <code>@unlistData</code> is length 1,600,000. Performing a by <code>.features</code>
grouping operation and attempting to evaluate the <code>exons</code> within the row
context would force the <code>CompressedGRangesList</code> object to be
chopped element-wise.</p>
<p>Unfortunately, there is a massive performance hit in attempting to construct
250,000 <code>GRanges</code>. Unless you do not mind waiting over an hour for each
<code>dplyr</code> verb in which <code>exons</code> gets evaluated, consider <code>biocmask_s4_proxy_vec()</code>.
This attempts to reconstruct certain standard <code>S4Vectors::Vectors</code> as
standard vectors or tibbles. The equivalent <code>exons</code> object would require
much more memory use, but at the advantage of only taking several seconds to
construct.When you are done, you can attempt to restore the original S4
Vector with <code>biocmask_restore_s4_proxy()</code>.</p>
<p><code>biocmask_s4_proxy_vec()</code> is faster to work with because there are less
checks on the object validity and all <code>@elementMetadata</code> and <code>@metadata</code> are
dropped from the objects.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vec_slice</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A vector</p></dd>


<dt id="arg-i">i<a class="anchor" aria-label="anchor" href="#arg-i"></a></dt>
<dd><p>An integer, character or logical vector specifying the
locations or names of the observations to get/set. Specify
<code>TRUE</code> to index all elements (as in <code>x[]</code>), or <code>NULL</code>, <code>FALSE</code> or
<code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code> to index none (as in <code>x[NULL]</code>).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a new S3 or S4 vector subsetted by <code>i</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">vec_slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, i <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-in"><span><span class="fu">vec_slice</span><span class="op">(</span><span class="fu">S4Vectors</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/S4Vectors/man/Rle-class.html" class="external-link">Rle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>, i <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer-Rle of length 1 with 1 run</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Lengths: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Values : 2</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/jtlandis" class="external-link">Justin Landis</a>, <a href="https://mikelove.github.io" class="external-link">Michael Love</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

